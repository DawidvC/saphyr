
struct Foo { int a; }

void func()
{
	@void p = new Foo;

	@Foo f = p->as(@Foo);

	int a = 10;

	auto b = a->as(bool);
}

========

%Foo = type { i32 }

define void @func() {
  %1 = call i8* @malloc(i64 4)
  %2 = bitcast i8* %1 to %Foo*
  %p = alloca i8*
  %3 = bitcast %Foo* %2 to i8*
  store i8* %3, i8** %p
  %4 = load i8** %p
  %5 = bitcast i8* %4 to %Foo*
  %f = alloca %Foo*
  store %Foo* %5, %Foo** %f
  %a = alloca i32
  store i32 10, i32* %a
  %6 = load i32* %a
  %7 = icmp ne i32 %6, 0
  %b = alloca i1
  store i1 %7, i1* %b
  ret void
}

declare i8* @malloc(i64)
