
class Empty
{
	this(int a)
	{
		a = 7;
	}
}

class MyClass
{
	struct this { int a, b; }

	this()
	{
		a = 4;
		b = 2;
	}
}

int main()
{
	Empty a{1};
	MyClass b{};

	return 0;
}

========

%Empty = type { i8 }
%MyClass = type { i32, i32 }

define void @Empty_this(%Empty* %this, i32 %a) {
  %1 = alloca %Empty*
  store %Empty* %this, %Empty** %1
  %2 = alloca i32
  store i32 %a, i32* %2
  store i32 7, i32* %2
  ret void
}

define void @MyClass_this(%MyClass* %this) {
  %1 = alloca %MyClass*
  store %MyClass* %this, %MyClass** %1
  %2 = load %MyClass** %1
  %3 = getelementptr %MyClass* %2, i32 0, i32 0
  store i32 4, i32* %3
  %4 = load %MyClass** %1
  %5 = getelementptr %MyClass* %4, i32 0, i32 1
  store i32 2, i32* %5
  ret void
}

define i32 @main() {
  %a = alloca %Empty
  call void @Empty_this(%Empty* %a, i32 1)
  %b = alloca %MyClass
  call void @MyClass_this(%MyClass* %b)
  ret i32 0
}
