
void foo()
{
	const int a;
	a = 5;
}

struct SS { int a; int b; }
enum EE { A, B, C }
union UU { int a; double d; }

void testRecursive()
{
	const SS a;
	a.b = 4;

	const EE b;
	b = EE.A;

	const UU c;
	c.a = 5;

	const[3]int d, e;
	d[2] = 2;
	d = e;
}

void testString()
{
	@const[]const int8 str = "this is a string";
	str[0] = 'x';

	auto s = "other string";
	s@ = str@;
}

void testConstPtr()
{
	const int a = 4;
	@int p;

	p = a$;
}

void constPtr()
{
	auto p = new const int{4};
	p@ = 2;

	auto a = new const[5]int;
	a[3] = 6;
}

void userTypeConstName()
{
	const SS a;
	const UU b;

	int x = a;
	int y = b;

	const EE c;
	[3]int d = c;
}

========

negative/Const.syp:5: assignment not allowed for constant variable
negative/Const.syp:15: assignment not allowed for constant variable
negative/Const.syp:18: assignment not allowed for constant variable
negative/Const.syp:21: assignment not allowed for constant variable
negative/Const.syp:24: assignment not allowed for constant variable
negative/Const.syp:25: assignment not allowed for constant variable
negative/Const.syp:31: assignment not allowed for constant variable
negative/Const.syp:34: assignment not allowed for constant variable
negative/Const.syp:42: Cannot cast type to pointer ( @const int32 to @int32 )
negative/Const.syp:48: assignment not allowed for constant variable
negative/Const.syp:51: assignment not allowed for constant variable
negative/Const.syp:59: Cannot cast complex types ( const SS to int32 )
negative/Const.syp:60: Cannot cast complex types ( const UU to int32 )
negative/Const.syp:63: Cannot cast complex types ( const EE to [3]int32 )
found 14 errors
